{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\TS\\\\budget-typescript\\\\src\\\\Context\\\\BudgetAndExpense\\\\BudgetAndExpense.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useContext } from 'react';\nimport { v4 as uuidV4 } from \"uuid\";\nimport useLocalStorage from \"../../hooks/useLocalStorage/useLocalStorage.ts\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UNCATEGORIZED_BUDGETID = \"其他\";\nconst BudgetContext = /*#__PURE__*/React.createContext(null);\nexport function useBudget() {\n  _s();\n  return useContext(BudgetContext);\n}\n\n// 這是名為\"其他\"的預設預算卡，但不會預設他的預算額度\n_s(useBudget, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst UncategorizedBudget = {\n  id: UNCATEGORIZED_BUDGETID,\n  name: UNCATEGORIZED_BUDGETID,\n  max: 0\n};\nexport default function BudgetAndExpenseContext({\n  children\n}) {\n  _s2();\n  const [budgets, setBudgets] = useLocalStorage(\"budgets\", [UncategorizedBudget]);\n  const [expenses, setExpenses] = useLocalStorage(\"expenses\", []);\n  function getBudgetExpenses(budgetID) {\n    return expenses.filter(expense => expense.budgetID === budgetID);\n  }\n  function isBudgetNameExist(budgetName) {\n    return budgets.some(budget => budget.name === budgetName);\n  }\n  function updateBudget(budgetID, name, max) {\n    setBudgets(prevBudgets => {\n      return prevBudgets.map(budget => {\n        if (budget.id === budgetID) {\n          if (name === \"\") {\n            return {\n              ...budget,\n              max\n            };\n          } else if (Number.isNaN(max)) {\n            return {\n              ...budget,\n              name\n            };\n          }\n          return {\n            ...budget,\n            name,\n            max\n          };\n        } else {\n          return budget;\n        }\n      });\n    });\n  }\n  function updateExpense(newBudgetID, id, name, amount) {\n    setExpenses(preExpenses => preExpenses.map(preExpense => {\n      if (preExpense.id === id) {\n        return {\n          ...preExpense,\n          budgetID: newBudgetID,\n          name: name,\n          amount: amount\n        };\n      } else {\n        return preExpense;\n      }\n    }));\n  }\n  function findBudgetFromBudgetID(budgetID) {\n    return budgets.find(budget => budget.id === budgetID);\n  }\n  function addBudget(name, max) {\n    console.log(\"add\");\n    setBudgets(prevBudgets => {\n      name = name.trim();\n      // 指派的變數對應的名稱相同就不用寫成 name: name, max: max，直接寫就好\n      return [{\n        id: uuidV4(),\n        name,\n        max\n      }, ...prevBudgets];\n    });\n  }\n  function addExpense(budgetID, amount, description) {\n    setExpenses(prevExpenses => {\n      description = description.trim();\n      return [{\n        budgetID,\n        id: uuidV4(),\n        amount,\n        description,\n        date: Date.now()\n      }, ...prevExpenses];\n    });\n  }\n  function deleteBudget(budgetID) {\n    setBudgets(preBudgets => {\n      return preBudgets.filter(budget => budget.id !== budgetID);\n    });\n    setExpenses(preExpense => {\n      return preExpense.filter(expense => expense.budgetID !== budgetID);\n    });\n  }\n  function deleteExpense(expenseID) {\n    setExpenses(preExpense => {\n      return preExpense.filter(expense => expense.id !== expenseID);\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(BudgetContext.Provider, {\n    value: {\n      budgets,\n      expenses,\n      getBudgetExpenses,\n      isBudgetNameExist,\n      findBudgetFromBudgetID,\n      updateBudget,\n      updateExpense,\n      addExpense,\n      addBudget,\n      deleteBudget,\n      deleteExpense\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 5\n  }, this);\n}\n_s2(BudgetAndExpenseContext, \"J7E4d7guQZ/gp2cZLJi5v6QwLyA=\", false, function () {\n  return [useLocalStorage, useLocalStorage];\n});\n_c = BudgetAndExpenseContext;\nvar _c;\n$RefreshReg$(_c, \"BudgetAndExpenseContext\");","map":{"version":3,"names":["React","useContext","v4","uuidV4","useLocalStorage","jsxDEV","_jsxDEV","UNCATEGORIZED_BUDGETID","BudgetContext","createContext","useBudget","_s","UncategorizedBudget","id","name","max","BudgetAndExpenseContext","children","_s2","budgets","setBudgets","expenses","setExpenses","getBudgetExpenses","budgetID","filter","expense","isBudgetNameExist","budgetName","some","budget","updateBudget","prevBudgets","map","Number","isNaN","updateExpense","newBudgetID","amount","preExpenses","preExpense","findBudgetFromBudgetID","find","addBudget","console","log","trim","addExpense","description","prevExpenses","date","Date","now","deleteBudget","preBudgets","deleteExpense","expenseID","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/user/Desktop/TS/budget-typescript/src/Context/BudgetAndExpense/BudgetAndExpense.tsx"],"sourcesContent":["import React, {ReactNode, useContext} from 'react'\r\nimport {v4 as uuidV4} from \"uuid\"\r\n\r\nimport useLocalStorage from \"../../hooks/useLocalStorage/useLocalStorage.ts\"\r\n\r\nexport interface budgetObject {\r\n  id:string,\r\n  name:string,\r\n  max:number\r\n} \r\n\r\nexport interface expenseObject {\r\n  id:string,\r\n  budgetID:string,\r\n  amount:number,\r\n  description:string\r\n  date: number\r\n}\r\n\r\nexport interface BudgetAndExpenseData {\r\n  budgets: budgetObject[],\r\n  expenses: expenseObject[],\r\n  getBudgetExpenses: (budgetID:string) => expenseObject[],\r\n  isBudgetNameExist:(budgetName: string) => boolean,\r\n  findBudgetFromBudgetID: (budget: string) => budgetObject,\r\n  updateBudget: (budget: string, name: string, max: number) => void,\r\n  updateExpense:(newBudgetID:string, id:string, name:string, amount:number) => void,\r\n  addBudget: (name:string, max:number) => void,\r\n  addExpense: (budgetID:string, amount:number, description:string ) => void,\r\n  deleteBudget: (budgetID: string) => void,\r\n  deleteExpense: (expenseID: string) => void\r\n}\r\n\r\nexport const UNCATEGORIZED_BUDGETID = \"其他\"\r\n\r\nconst BudgetContext = React.createContext<BudgetAndExpenseData | null>(null)\r\n\r\nexport function useBudget(): BudgetAndExpenseData | null {\r\n  return useContext(BudgetContext)\r\n}\r\n\r\n// 這是名為\"其他\"的預設預算卡，但不會預設他的預算額度\r\nconst UncategorizedBudget:budgetObject = {\r\n  id:UNCATEGORIZED_BUDGETID,\r\n  name:UNCATEGORIZED_BUDGETID,\r\n  max: 0\r\n}\r\n\r\nexport default function BudgetAndExpenseContext( {children} : {children:ReactNode} ) {\r\n  const [budgets, setBudgets] = useLocalStorage<budgetObject[]>(\"budgets\", [UncategorizedBudget])\r\n  const [expenses, setExpenses] = useLocalStorage<expenseObject[]>(\"expenses\", [])\r\n\r\n  function getBudgetExpenses(budgetID:string): expenseObject[] {\r\n    return expenses.filter(expense => expense.budgetID === budgetID)\r\n  }\r\n\r\n  function isBudgetNameExist(budgetName:string): boolean {\r\n    return budgets.some(budget => budget.name === budgetName);\r\n  }\r\n\r\n  function updateBudget(budgetID: string, name: string, max: number): void {\r\n    setBudgets( prevBudgets => {\r\n      return (\r\n        prevBudgets.map((budget)=> {\r\n          if (budget.id === budgetID) {\r\n            if (name === \"\") {\r\n              return {...budget, max}\r\n            } else if (Number.isNaN(max)) {\r\n              return {...budget, name}\r\n            }\r\n            return {...budget, name, max}\r\n          } else {\r\n            return budget\r\n          }\r\n        })\r\n      )\r\n    })\r\n  }\r\n\r\n  function updateExpense(newBudgetID:string, id:string, name:string, amount:number) {\r\n    setExpenses(preExpenses => \r\n      preExpenses.map(preExpense => {\r\n        if (preExpense.id === id) {\r\n          return {...preExpense, budgetID:newBudgetID, name:name, amount:amount}\r\n        } else {\r\n          return preExpense\r\n        }\r\n      })\r\n    )\r\n  } \r\n\r\n  function findBudgetFromBudgetID(budgetID: string): budgetObject {\r\n    return budgets.find(budget => budget.id === budgetID) as budgetObject\r\n  }\r\n\r\n  function addBudget(name:string, max:number): void {\r\n    console.log(\"add\")\r\n    setBudgets( prevBudgets => {\r\n        name = name.trim()\r\n        // 指派的變數對應的名稱相同就不用寫成 name: name, max: max，直接寫就好\r\n        return [{id:uuidV4(), name, max}, ...prevBudgets]\r\n      }\r\n    )\r\n  }\r\n\r\n  function addExpense(budgetID:string, amount:number, description:string): void {\r\n    setExpenses(prevExpenses => {\r\n      description = description.trim()\r\n      return [{budgetID, id: uuidV4(), amount, description, date:Date.now()}, ...prevExpenses]\r\n    })\r\n  }\r\n\r\n  function deleteBudget(budgetID: string): void {\r\n    setBudgets(preBudgets => {\r\n      return preBudgets.filter(budget => budget.id !== budgetID)\r\n    })\r\n\r\n    setExpenses(preExpense => {\r\n      return preExpense.filter(expense => expense.budgetID !== budgetID)\r\n    })\r\n  }\r\n\r\n  function deleteExpense(expenseID: string): void {\r\n    setExpenses(preExpense => {\r\n      return preExpense.filter(expense => expense.id !== expenseID)\r\n    })\r\n  }\r\n\r\n  return (\r\n    <BudgetContext.Provider value={{\r\n      budgets,\r\n      expenses,\r\n      getBudgetExpenses,\r\n      isBudgetNameExist,\r\n      findBudgetFromBudgetID,\r\n      updateBudget,\r\n      updateExpense,\r\n      addExpense,\r\n      addBudget,\r\n      deleteBudget,\r\n      deleteExpense\r\n    }}>\r\n      {children}\r\n    </BudgetContext.Provider>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}