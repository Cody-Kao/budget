{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\TS\\\\budget-typescript\\\\src\\\\Context\\\\BudgetAndExpense\\\\BudgetAndExpense.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport { v4 as uuidV4 } from \"uuid\";\nimport FlashMsg from '../../Components/FlashMsg/FlashMsg.tsx';\nimport useLocalStorage from \"../../hooks/useLocalStorage/useLocalStorage.ts\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UNCATEGORIZED_BUDGETID = \"其他\";\nconst BudgetContext = /*#__PURE__*/React.createContext(null);\nexport function useBudget() {\n  _s();\n  return useContext(BudgetContext);\n}\n\n// 這是名為\"其他\"的預設預算卡，但不會預設他的預算額度\n_s(useBudget, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst UncategorizedBudget = {\n  id: UNCATEGORIZED_BUDGETID,\n  name: UNCATEGORIZED_BUDGETID,\n  max: 0\n};\nexport default function BudgetAndExpenseContext({\n  children\n}) {\n  _s2();\n  const [showLogInAlert, setShowLogInAlert] = useState(false);\n  const [showFectDataAlert, setShowFetchDataAlert] = useState(false);\n  // 這個是專門展示所有對Budgets或Expenses CRUD的警告\n  const [showPostAlert, setShowPostAlert] = useState(false);\n  const [showPostAlertMsg, setShowPostAlertMsg] = useState(\"\");\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  // 這是一個方便我們自訂錯誤訊息的wrapper，能加工CRUD的警告\n  function displaysetShowPostAlert(msg) {\n    setShowPostAlertMsg(msg);\n    setShowPostAlert(true);\n  }\n\n  // 一載入就檢查是否logged in\n  useEffect(() => {\n    const checkLogInStatus = async () => {\n      try {\n        // credentials: \"include\" 讓fetch request去挾帶cookie\n        const response = await fetch(\"http://localhost:5000/isLoggedIn\", {\n          credentials: \"include\"\n        });\n        const res = await response.json();\n        console.log(res);\n        if (res.isLoggedIn) setIsLoggedIn(true);\n      } catch (error) {\n        setShowLogInAlert(true);\n      }\n    };\n    checkLogInStatus();\n  }, []);\n  console.log(\"is logged in\", isLoggedIn);\n  useEffect(() => {\n    if (isLoggedIn) {\n      // then we fetch the budgets and expenses data from DB \n      console.log(\"fetch budgets from DB\");\n      const getBudgets = async () => {\n        try {\n          const response = await fetch(\"http://localhost:5000/getBudgets\", {\n            credentials: \"include\"\n          });\n          if (!response.ok) {\n            console.log(\"Failed to fetch budget data\");\n            setShowFetchDataAlert(true);\n          }\n          const data = await response.json();\n          console.log(\"budgets from DB\", data);\n          if (data !== null) {\n            setBudgets(data);\n          } else {\n            setBudgets([]);\n          }\n        } catch (error) {\n          console.log(\"Catch error when fetch budgets data\", error);\n          setShowFetchDataAlert(true);\n        }\n      };\n      getBudgets();\n      const getExpenses = async () => {\n        try {\n          const response = await fetch(\"http://localhost:5000/getExpenses\", {\n            credentials: \"include\"\n          });\n          if (!response.ok) {\n            console.log(\"Failed to fetch expenses data\");\n            setShowFetchDataAlert(true);\n          }\n          const data = await response.json();\n          console.log(\"expenses from DB\", data);\n          if (data !== null) {\n            setExpenses(data);\n          } else {\n            setExpenses([]);\n          }\n        } catch (error) {\n          console.log(\"Catch error when fetch expenses data\", error);\n          setShowFetchDataAlert(true);\n        }\n      };\n      getExpenses();\n    }\n  }, [isLoggedIn]);\n\n  // 預設是訪客\n  const [budgets, setBudgets] = useLocalStorage(\"budgets\", [UncategorizedBudget], isLoggedIn);\n  const [expenses, setExpenses] = useLocalStorage(\"expenses\", [], isLoggedIn);\n  function LogIn() {\n    setIsLoggedIn(true);\n  }\n  function LogOut() {\n    setIsLoggedIn(false);\n  }\n  function getBudgetExpenses(budgetID) {\n    return expenses.filter(expense => expense.budgetID === budgetID);\n  }\n  function isBudgetNameExist(budgetName) {\n    return budgets.some(budget => budget.name === budgetName);\n  }\n  function findBudgetFromBudgetID(budgetID) {\n    return budgets === null || budgets === void 0 ? void 0 : budgets.find(budget => budget.id === budgetID);\n  }\n  function addBudget(name, max) {\n    const id = uuidV4();\n    const data = {\n      id,\n      name,\n      max\n    };\n    if (isLoggedIn) {\n      const sendPost = async () => {\n        try {\n          const response = await fetch(\"http://localhost:5000/createBudget\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            credentials: \"include\",\n            body: JSON.stringify(data)\n          });\n          const res = await response.json();\n          // 如果session cookie錯誤或是過期，就登出\n          if (res.logIn === false) {\n            alert(res.msg);\n            LogOut();\n          } else {\n            setBudgets(prevBudgets => {\n              name = name.trim();\n              // 指派的變數對應的名稱相同就不用寫成 name: name, max: max，直接寫就好\n              return [{\n                id,\n                name,\n                max\n              }, ...prevBudgets];\n            });\n          }\n        } catch (error) {\n          console.log(\"fetch createBudget error\", error);\n          displaysetShowPostAlert(error);\n        }\n      };\n      sendPost();\n    } else {\n      setBudgets(prevBudgets => {\n        name = name.trim();\n        // 指派的變數對應的名稱相同就不用寫成 name: name, max: max，直接寫就好\n        return [{\n          id,\n          name,\n          max\n        }, ...prevBudgets];\n      });\n    }\n    console.log(\"add budget\");\n  }\n  function addExpense(budgetID, amount, description) {\n    const id = uuidV4();\n    const date = Date.now();\n    const data = {\n      id,\n      budgetID,\n      description,\n      amount,\n      date\n    };\n    if (isLoggedIn) {\n      const sendPost = async () => {\n        try {\n          const response = await fetch(\"http://localhost:5000/createExpense\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            credentials: \"include\",\n            body: JSON.stringify(data)\n          });\n          const res = await response.json();\n          if (res.logIn === false) {\n            alert(res.msg);\n            LogOut();\n          } else {\n            setExpenses(prevExpenses => {\n              description = description.trim();\n              return [{\n                budgetID,\n                id,\n                amount,\n                description,\n                date\n              }, ...prevExpenses];\n            });\n          }\n        } catch (error) {\n          console.log(\"fetch createExpense error\", error);\n          displaysetShowPostAlert(error);\n        }\n      };\n      sendPost();\n    } else {\n      setExpenses(prevExpenses => {\n        description = description.trim();\n        return [{\n          budgetID,\n          id,\n          amount,\n          description,\n          date\n        }, ...prevExpenses];\n      });\n    }\n    console.log(\"add expense\");\n  }\n  function updateBudget(budgetID, name, max) {\n    if (isLoggedIn) {\n      let data = {\n        budgetID,\n        name,\n        max\n      };\n      if (Number.isNaN(max)) data.max = -1; // 如果max不變的話，就改為-1，因為只要是負數到了後端都不採納變更\n\n      const sendPost = async () => {\n        try {\n          const response = await fetch(\"http://localhost:5000/updateBudget\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(data),\n            credentials: \"include\"\n          });\n          const res = await response.json();\n          if (res.logIn === false) {\n            alert(res.msg);\n            LogOut();\n          } else {\n            setBudgets(prevBudgets => {\n              return prevBudgets.map(budget => {\n                if (budget.id === budgetID) {\n                  if (name === \"\") {\n                    return {\n                      ...budget,\n                      max\n                    };\n                  } else if (Number.isNaN(max)) {\n                    return {\n                      ...budget,\n                      name\n                    };\n                  }\n                  return {\n                    ...budget,\n                    name,\n                    max\n                  };\n                } else {\n                  return budget;\n                }\n              });\n            });\n          }\n        } catch (error) {\n          console.log(\"fetch updateBudget error\", error);\n          displaysetShowPostAlert(error);\n        }\n      };\n      sendPost();\n    } else {\n      setBudgets(prevBudgets => {\n        return prevBudgets.map(budget => {\n          if (budget.id === budgetID) {\n            if (name === \"\") {\n              return {\n                ...budget,\n                max\n              };\n            } else if (Number.isNaN(max)) {\n              return {\n                ...budget,\n                name\n              };\n            }\n            return {\n              ...budget,\n              name,\n              max\n            };\n          } else {\n            return budget;\n          }\n        });\n      });\n    }\n    console.log(\"update budget\");\n  }\n  function updateExpense(newBudgetID, id, description, amount) {\n    if (isLoggedIn) {\n      const sendPost = async () => {\n        const data = {\n          newBudgetID,\n          id,\n          description,\n          amount\n        };\n        try {\n          const response = await fetch(\"http://localhost:5000/updateExpense\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(data),\n            credentials: \"include\"\n          });\n          const res = await response.json();\n          if (res.logIn === false) {\n            alert(res.msg);\n            LogOut();\n          } else {\n            setExpenses(preExpenses => preExpenses.map(preExpense => {\n              if (preExpense.id === id) {\n                return {\n                  ...preExpense,\n                  budgetID: newBudgetID,\n                  description: description,\n                  amount: amount\n                };\n              } else {\n                return preExpense;\n              }\n            }));\n          }\n        } catch (error) {\n          console.log(\"fetch update expense error\", error);\n          displaysetShowPostAlert(error);\n        }\n      };\n      sendPost();\n    } else {\n      setExpenses(preExpenses => preExpenses.map(preExpense => {\n        if (preExpense.id === id) {\n          return {\n            ...preExpense,\n            budgetID: newBudgetID,\n            description: description,\n            amount: amount\n          };\n        } else {\n          return preExpense;\n        }\n      }));\n    }\n    console.log(\"update expense\");\n  }\n  function deleteBudget(budgetID) {\n    if (isLoggedIn) {\n      const sendPost = async () => {\n        const data = {\n          budgetID\n        };\n        try {\n          const response = await fetch(\"http://localhost:5000/deleteBudget\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(data),\n            credentials: \"include\"\n          });\n          const res = await response.json();\n          if (res.logIn === false) {\n            alert(res.msg);\n            LogOut();\n          } else {\n            setBudgets(preBudgets => {\n              return preBudgets.filter(budget => budget.id !== budgetID);\n            });\n            setExpenses(preExpense => {\n              return preExpense.filter(expense => expense.budgetID !== budgetID);\n            });\n          }\n        } catch (error) {\n          console.log(\"fetch delete budget error\", error);\n          displaysetShowPostAlert(error);\n        }\n      };\n      sendPost();\n    } else {\n      setBudgets(preBudgets => {\n        return preBudgets.filter(budget => budget.id !== budgetID);\n      });\n      setExpenses(preExpense => {\n        return preExpense.filter(expense => expense.budgetID !== budgetID);\n      });\n    }\n    console.log(\"delete budget\");\n  }\n  function deleteExpense(expenseID) {\n    if (isLoggedIn) {\n      const sendPost = async () => {\n        const data = {\n          expenseID\n        };\n        try {\n          const response = await fetch(\"http://localhost:5000/deleteExpense\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(data),\n            credentials: \"include\"\n          });\n          const res = await response.json();\n          if (res.logIn === false) {\n            alert(res.msg);\n            LogOut();\n          } else {\n            setExpenses(preExpense => {\n              return preExpense.filter(expense => expense.id !== expenseID);\n            });\n          }\n        } catch (error) {\n          console.log(\"fetch delete budget error\", error);\n          displaysetShowPostAlert(error);\n        }\n      };\n      sendPost();\n    } else {\n      setExpenses(preExpense => {\n        return preExpense.filter(expense => expense.id !== expenseID);\n      });\n    }\n    console.log(\"delete expense\");\n  }\n  return (\n    /*#__PURE__*/\n    // 如果日後要後端資料加載很久可以考慮加上spinner\n    _jsxDEV(BudgetContext.Provider, {\n      value: {\n        budgets,\n        expenses,\n        isLoggedIn,\n        LogIn,\n        LogOut,\n        getBudgetExpenses,\n        isBudgetNameExist,\n        findBudgetFromBudgetID,\n        updateBudget,\n        updateExpense,\n        addExpense,\n        addBudget,\n        deleteBudget,\n        deleteExpense\n      },\n      children: [/*#__PURE__*/_jsxDEV(FlashMsg, {\n        show: showLogInAlert,\n        handleClose: () => {\n          setShowLogInAlert(false);\n        },\n        type: \"error\",\n        message: '網路連線或伺服器憑證錯誤! 無法登入'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(FlashMsg, {\n        show: showFectDataAlert,\n        handleClose: () => {\n          setShowFetchDataAlert(false);\n        },\n        type: \"error\",\n        message: \"無法取得伺服器資料，請檢查網路連線後重試\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(FlashMsg, {\n        show: showPostAlert,\n        handleClose: () => {\n          setShowPostAlert(false);\n        },\n        type: \"error\",\n        message: showPostAlertMsg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 7\n      }, this), children]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 5\n    }, this)\n  );\n}\n_s2(BudgetAndExpenseContext, \"UNaARauJTTA9Zc8ue1K63JmL/Xk=\", false, function () {\n  return [useLocalStorage, useLocalStorage];\n});\n_c = BudgetAndExpenseContext;\nvar _c;\n$RefreshReg$(_c, \"BudgetAndExpenseContext\");","map":{"version":3,"names":["React","useContext","useEffect","useState","v4","uuidV4","FlashMsg","useLocalStorage","jsxDEV","_jsxDEV","UNCATEGORIZED_BUDGETID","BudgetContext","createContext","useBudget","_s","UncategorizedBudget","id","name","max","BudgetAndExpenseContext","children","_s2","showLogInAlert","setShowLogInAlert","showFectDataAlert","setShowFetchDataAlert","showPostAlert","setShowPostAlert","showPostAlertMsg","setShowPostAlertMsg","isLoggedIn","setIsLoggedIn","displaysetShowPostAlert","msg","checkLogInStatus","response","fetch","credentials","res","json","console","log","error","getBudgets","ok","data","setBudgets","getExpenses","setExpenses","budgets","expenses","LogIn","LogOut","getBudgetExpenses","budgetID","filter","expense","isBudgetNameExist","budgetName","some","budget","findBudgetFromBudgetID","find","addBudget","sendPost","method","headers","body","JSON","stringify","logIn","alert","prevBudgets","trim","addExpense","amount","description","date","Date","now","prevExpenses","updateBudget","Number","isNaN","map","updateExpense","newBudgetID","preExpenses","preExpense","deleteBudget","preBudgets","deleteExpense","expenseID","Provider","value","show","handleClose","type","message","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/user/Desktop/TS/budget-typescript/src/Context/BudgetAndExpense/BudgetAndExpense.tsx"],"sourcesContent":["import React, {ReactNode, useContext, useEffect, useState} from 'react'\r\nimport {v4 as uuidV4} from \"uuid\"\r\n\r\nimport FlashMsg from '../../Components/FlashMsg/FlashMsg.tsx'\r\nimport useLocalStorage from \"../../hooks/useLocalStorage/useLocalStorage.ts\"\r\n\r\nexport interface budgetObject {\r\n  id:string,\r\n  name:string,\r\n  max:number\r\n} \r\n\r\nexport interface expenseObject {\r\n  id:string,\r\n  budgetID:string,\r\n  amount:number,\r\n  description:string\r\n  date: number\r\n}\r\n\r\nexport interface BudgetAndExpenseData {\r\n  budgets: budgetObject[],\r\n  expenses: expenseObject[],\r\n  isLoggedIn: boolean,\r\n  LogIn: () => void,\r\n  LogOut: () => void,\r\n  getBudgetExpenses: (budgetID:string) => expenseObject[],\r\n  isBudgetNameExist:(budgetName: string) => boolean,\r\n  findBudgetFromBudgetID: (budget: string) => budgetObject,\r\n  updateBudget: (budget: string, name: string, max: number) => void,\r\n  updateExpense:(newBudgetID:string, id:string, name:string, amount:number) => void,\r\n  addBudget: (name:string, max:number) => void,\r\n  addExpense: (budgetID:string, amount:number, description:string ) => void,\r\n  deleteBudget: (budgetID: string) => void,\r\n  deleteExpense: (expenseID: string) => void\r\n}\r\n\r\nexport const UNCATEGORIZED_BUDGETID = \"其他\"\r\n\r\nconst BudgetContext = React.createContext<BudgetAndExpenseData | null>(null)\r\n\r\nexport function useBudget(): BudgetAndExpenseData | null {\r\n  return useContext(BudgetContext)\r\n}\r\n\r\n// 這是名為\"其他\"的預設預算卡，但不會預設他的預算額度\r\nconst UncategorizedBudget:budgetObject = {\r\n  id:UNCATEGORIZED_BUDGETID,\r\n  name:UNCATEGORIZED_BUDGETID,\r\n  max: 0\r\n}\r\n\r\nexport default function BudgetAndExpenseContext( {children} : {children:ReactNode} ) {\r\n  const [showLogInAlert, setShowLogInAlert] = useState<boolean>(false)\r\n  const [showFectDataAlert, setShowFetchDataAlert] = useState<boolean>(false)\r\n  // 這個是專門展示所有對Budgets或Expenses CRUD的警告\r\n  const [showPostAlert, setShowPostAlert] = useState<boolean>(false)\r\n  const [showPostAlertMsg, setShowPostAlertMsg] = useState<string>(\"\")\r\n  const [isLoggedIn, setIsLoggedIn] = useState<boolean>(false)\r\n\r\n  // 這是一個方便我們自訂錯誤訊息的wrapper，能加工CRUD的警告\r\n  function displaysetShowPostAlert(msg:string) {\r\n    setShowPostAlertMsg(msg)\r\n    setShowPostAlert(true)\r\n  }\r\n\r\n  // 一載入就檢查是否logged in\r\n  useEffect(()=>{\r\n    const checkLogInStatus = async () => {\r\n      try {\r\n        // credentials: \"include\" 讓fetch request去挾帶cookie\r\n        const response = await fetch(\"http://localhost:5000/isLoggedIn\", {credentials: \"include\"})\r\n        const res = await response.json()\r\n        console.log(res)\r\n        if (res.isLoggedIn) setIsLoggedIn(true)\r\n\r\n      } catch(error) {\r\n        setShowLogInAlert(true)\r\n      }\r\n    }\r\n    checkLogInStatus()\r\n  }, [])\r\n  console.log(\"is logged in\", isLoggedIn)\r\n\r\n  useEffect(() => {\r\n    if (isLoggedIn) {\r\n      // then we fetch the budgets and expenses data from DB \r\n      console.log(\"fetch budgets from DB\")\r\n      const getBudgets = async () => {\r\n          try {\r\n            const response = await fetch(\"http://localhost:5000/getBudgets\", { credentials: \"include\" });\r\n            if (!response.ok) {\r\n                console.log(\"Failed to fetch budget data\");\r\n                setShowFetchDataAlert(true)\r\n            }\r\n            const data = await response.json();\r\n            console.log(\"budgets from DB\", data)\r\n            if (data !== null) {\r\n              setBudgets(data);\r\n            } else {\r\n              setBudgets([]);\r\n            }\r\n            \r\n        } catch (error) {\r\n            console.log(\"Catch error when fetch budgets data\", error);\r\n            setShowFetchDataAlert(true)\r\n        }\r\n      };\r\n      getBudgets();\r\n      const getExpenses = async () => {\r\n        try {\r\n            const response = await fetch(\"http://localhost:5000/getExpenses\", { credentials: \"include\" });\r\n            if (!response.ok) {\r\n                console.log(\"Failed to fetch expenses data\");\r\n                setShowFetchDataAlert(true)\r\n            }\r\n            const data = await response.json();\r\n            console.log(\"expenses from DB\", data)\r\n            if (data !== null) {\r\n              setExpenses(data);\r\n            } else {\r\n              setExpenses([]);\r\n            }\r\n        } catch (error) {\r\n            console.log(\"Catch error when fetch expenses data\", error);\r\n            setShowFetchDataAlert(true)\r\n        }\r\n      };\r\n      getExpenses()\r\n    }\r\n  }, [isLoggedIn])\r\n\r\n  // 預設是訪客\r\n  const [budgets, setBudgets] = useLocalStorage<budgetObject[]>(\"budgets\", [UncategorizedBudget], isLoggedIn)\r\n  const [expenses, setExpenses] = useLocalStorage<expenseObject[]>(\"expenses\", [], isLoggedIn)\r\n\r\n  function LogIn() {\r\n    setIsLoggedIn(true)\r\n  }\r\n\r\n  function LogOut() {\r\n    setIsLoggedIn(false)\r\n  }\r\n\r\n  function getBudgetExpenses(budgetID:string): expenseObject[] {\r\n    return expenses.filter(expense => expense.budgetID === budgetID)\r\n  }\r\n\r\n  function isBudgetNameExist(budgetName:string): boolean {\r\n    return budgets.some(budget => budget.name === budgetName);\r\n  }\r\n\r\n  function findBudgetFromBudgetID(budgetID: string): budgetObject {\r\n    return budgets?.find(budget => budget.id === budgetID) as budgetObject\r\n  }\r\n\r\n  function addBudget(name:string, max:number): void {\r\n    const id = uuidV4()\r\n    const data: budgetObject = {\r\n      id,\r\n      name,\r\n      max\r\n    }\r\n\r\n    if (isLoggedIn) {\r\n      const sendPost = async () => {\r\n        try {\r\n          const response = await fetch(\"http://localhost:5000/createBudget\", {\r\n            method: \"POST\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\"\r\n            },\r\n            credentials:\"include\",\r\n            body: JSON.stringify(data)\r\n          });\r\n          const res = await response.json()\r\n          // 如果session cookie錯誤或是過期，就登出\r\n          if (res.logIn === false) {\r\n            alert(res.msg)\r\n            LogOut()\r\n          } else {\r\n            setBudgets( prevBudgets => {\r\n              name = name.trim()\r\n              // 指派的變數對應的名稱相同就不用寫成 name: name, max: max，直接寫就好\r\n              return [{id, name, max}, ...prevBudgets]\r\n            })\r\n          }\r\n        } catch(error) {\r\n          console.log(\"fetch createBudget error\", error)\r\n          displaysetShowPostAlert(error as string)\r\n        }\r\n      }\r\n\r\n      sendPost()\r\n    } else {\r\n      setBudgets( prevBudgets => {\r\n        name = name.trim()\r\n        // 指派的變數對應的名稱相同就不用寫成 name: name, max: max，直接寫就好\r\n        return [{id, name, max}, ...prevBudgets]\r\n      })\r\n    }\r\n\r\n    console.log(\"add budget\")\r\n  }\r\n\r\n  function addExpense(budgetID:string, amount:number, description:string): void {\r\n    const id = uuidV4()\r\n    const date = Date.now()\r\n    const data: expenseObject = {\r\n      id,\r\n      budgetID,\r\n      description,\r\n      amount,\r\n      date\r\n    }\r\n\r\n    if (isLoggedIn) {\r\n      const sendPost = async () => {\r\n        try {\r\n          const response = await fetch(\"http://localhost:5000/createExpense\", {\r\n            method:\"POST\",\r\n            headers: {\r\n              \"Content-Type\":\"application/json\"\r\n            },\r\n            credentials:\"include\",\r\n            body:JSON.stringify(data)\r\n          })\r\n          const res = await response.json()\r\n\r\n          if (res.logIn === false) {\r\n            alert(res.msg)\r\n            LogOut()\r\n          } else {\r\n            setExpenses(prevExpenses => {\r\n              description = description.trim()\r\n              return [{budgetID, id, amount, description, date}, ...prevExpenses]\r\n            })\r\n          }\r\n        } catch(error) {\r\n          console.log(\"fetch createExpense error\", error)\r\n          displaysetShowPostAlert(error as string)\r\n        }\r\n      }\r\n\r\n      sendPost()\r\n\r\n    } else {\r\n      setExpenses(prevExpenses => {\r\n        description = description.trim()\r\n        return [{budgetID, id, amount, description, date}, ...prevExpenses]\r\n      })\r\n    }\r\n\r\n    console.log(\"add expense\")\r\n  }\r\n\r\n  function updateBudget(budgetID: string, name: string, max: number): void {\r\n    if (isLoggedIn) {\r\n      let data = {\r\n        budgetID,\r\n        name,\r\n        max\r\n      }\r\n      if (Number.isNaN(max)) data.max = -1 // 如果max不變的話，就改為-1，因為只要是負數到了後端都不採納變更\r\n\r\n      const sendPost = async () => {\r\n        try {\r\n          const response = await fetch(\"http://localhost:5000/updateBudget\", {\r\n            method:\"POST\",\r\n            headers:{\r\n              \"Content-Type\":\"application/json\"\r\n            },\r\n            body:JSON.stringify(data),\r\n            credentials:\"include\"\r\n          })\r\n          const res = await response.json()\r\n\r\n          if (res.logIn === false) {\r\n            alert(res.msg)\r\n            LogOut()\r\n          } else {\r\n            setBudgets( prevBudgets => {\r\n              return (\r\n                prevBudgets.map((budget)=> {\r\n                  if (budget.id === budgetID) {\r\n                    if (name === \"\") {\r\n                      return {...budget, max}\r\n                    } else if (Number.isNaN(max)) {\r\n                      return {...budget, name}\r\n                    }\r\n                    return {...budget, name, max}\r\n                  } else {\r\n                    return budget\r\n                  }\r\n                })\r\n              )\r\n            })\r\n          }\r\n        } catch(error) {\r\n          console.log(\"fetch updateBudget error\", error)\r\n          displaysetShowPostAlert(error as string)\r\n        }\r\n      }\r\n\r\n      sendPost()\r\n     } else {\r\n      setBudgets( prevBudgets => {\r\n        return (\r\n          prevBudgets.map((budget)=> {\r\n            if (budget.id === budgetID) {\r\n              if (name === \"\") {\r\n                return {...budget, max}\r\n              } else if (Number.isNaN(max)) {\r\n                return {...budget, name}\r\n              }\r\n              return {...budget, name, max}\r\n            } else {\r\n              return budget\r\n            }\r\n          })\r\n        )\r\n      })\r\n    }\r\n    console.log(\"update budget\")\r\n  }\r\n\r\n  function updateExpense(newBudgetID:string, id:string, description:string, amount:number) {\r\n    if (isLoggedIn) {\r\n      const sendPost = async () => {\r\n        const data = {\r\n          newBudgetID,\r\n          id,\r\n          description,\r\n          amount\r\n        }\r\n        try {\r\n          const response = await fetch(\"http://localhost:5000/updateExpense\", {\r\n            method:\"POST\",\r\n            headers:{\r\n              \"Content-Type\":\"application/json\"\r\n            },\r\n            body:JSON.stringify(data),\r\n            credentials:\"include\"\r\n          })\r\n          const res = await response.json()\r\n\r\n          if (res.logIn === false) {\r\n            alert(res.msg)\r\n            LogOut()\r\n          } else {\r\n            setExpenses(preExpenses => \r\n              preExpenses.map(preExpense => {\r\n                if (preExpense.id === id) {\r\n                  return {...preExpense, budgetID:newBudgetID, description:description, amount:amount}\r\n                } else {\r\n                  return preExpense\r\n                }\r\n              })\r\n            )\r\n          }\r\n        } catch(error) {\r\n          console.log(\"fetch update expense error\", error)\r\n          displaysetShowPostAlert(error as string)\r\n        }\r\n      }\r\n\r\n      sendPost()\r\n    } else {\r\n      setExpenses(preExpenses => \r\n        preExpenses.map(preExpense => {\r\n          if (preExpense.id === id) {\r\n            return {...preExpense, budgetID:newBudgetID, description:description, amount:amount}\r\n          } else {\r\n            return preExpense\r\n          }\r\n        })\r\n      )\r\n    }\r\n\r\n    console.log(\"update expense\")\r\n  } \r\n  \r\n  function deleteBudget(budgetID: string): void {\r\n    if (isLoggedIn) {\r\n      const sendPost = async () => {\r\n        const data = {\r\n          budgetID\r\n        }\r\n        try {\r\n          const response = await fetch(\"http://localhost:5000/deleteBudget\", {\r\n            method:\"POST\",\r\n            headers:{\r\n              \"Content-Type\":\"application/json\"\r\n            },\r\n            body:JSON.stringify(data),\r\n            credentials:\"include\"\r\n          })\r\n          const res = await response.json()\r\n\r\n          if (res.logIn === false) {\r\n            alert(res.msg)\r\n            LogOut()\r\n          } else {\r\n            setBudgets(preBudgets => {\r\n              return preBudgets.filter(budget => budget.id !== budgetID)\r\n            })\r\n        \r\n            setExpenses(preExpense => {\r\n              return preExpense.filter(expense => expense.budgetID !== budgetID)\r\n            })\r\n          }\r\n        } catch(error) {\r\n          console.log(\"fetch delete budget error\", error)\r\n          displaysetShowPostAlert(error as string)\r\n        }\r\n      }\r\n\r\n      sendPost()\r\n    } else {\r\n      setBudgets(preBudgets => {\r\n        return preBudgets.filter(budget => budget.id !== budgetID)\r\n      })\r\n  \r\n      setExpenses(preExpense => {\r\n        return preExpense.filter(expense => expense.budgetID !== budgetID)\r\n      })\r\n    }\r\n\r\n    console.log(\"delete budget\")\r\n  }\r\n\r\n  function deleteExpense(expenseID: string): void {\r\n    if (isLoggedIn) {\r\n      const sendPost = async () => {\r\n        const data = {\r\n          expenseID\r\n        }\r\n        try {\r\n          const response = await fetch(\"http://localhost:5000/deleteExpense\", {\r\n            method:\"POST\",\r\n            headers:{\r\n              \"Content-Type\":\"application/json\"\r\n            },\r\n            body:JSON.stringify(data),\r\n            credentials:\"include\"\r\n          })\r\n          const res = await response.json()\r\n\r\n          if (res.logIn === false) {\r\n            alert(res.msg)\r\n            LogOut()\r\n          } else {\r\n            setExpenses(preExpense => {\r\n              return preExpense.filter(expense => expense.id !== expenseID)\r\n            })\r\n          }\r\n        } catch(error) {\r\n          console.log(\"fetch delete budget error\", error)\r\n          displaysetShowPostAlert(error as string)\r\n        }\r\n      }\r\n\r\n      sendPost()\r\n    } else {\r\n      setExpenses(preExpense => {\r\n        return preExpense.filter(expense => expense.id !== expenseID)\r\n      })\r\n    }\r\n\r\n    console.log(\"delete expense\")\r\n\r\n  }\r\n\r\n  return (\r\n    // 如果日後要後端資料加載很久可以考慮加上spinner\r\n    <BudgetContext.Provider value={{\r\n      budgets,\r\n      expenses,\r\n      isLoggedIn,\r\n      LogIn,\r\n      LogOut,\r\n      getBudgetExpenses,\r\n      isBudgetNameExist,\r\n      findBudgetFromBudgetID,\r\n      updateBudget,\r\n      updateExpense,\r\n      addExpense,\r\n      addBudget,\r\n      deleteBudget,\r\n      deleteExpense\r\n    }}>\r\n      <FlashMsg show={showLogInAlert} handleClose={()=> {\r\n        setShowLogInAlert(false)} } type={\"error\"} message={'網路連線或伺服器憑證錯誤! 無法登入'} />\r\n      <FlashMsg show={showFectDataAlert} handleClose={()=> \r\n        {setShowFetchDataAlert(false)}} type={\"error\"} message={\"無法取得伺服器資料，請檢查網路連線後重試\"}/>\r\n      <FlashMsg show={showPostAlert} handleClose={()=> \r\n        {setShowPostAlert(false)}} type={\"error\"} message={showPostAlertMsg}/>\r\n      {children}\r\n    </BudgetContext.Provider>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}